<!doctype html>
<html lang="de">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>


  
    <!-- Multiple Select Plugin: https://multiple-select.wenzhixin.net.cn/ -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.js"></script>
 



    <!-- Anna-Maria -->
    <script src="https://unpkg.com/neovis.js@2.0.2"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- 3d-force GRaph library to represent graph data-->
    <script src="//unpkg.com/three"></script>
    <script src="//unpkg.com/three-spritetext"></script>
    <script src="//unpkg.com/3d-force-graph"></script>
    


    <title>PAIRS Smart Crisis Management Service</title>

    <!-- Script for graph visualisation -->

    <!-- Anna-Maria--> 
    <script src="{{url_for('static', filename='js/draw.js')}}"></script>
    <script>
        function startViz(){

            draw('viz1')

            }

    </script>



  </head>
  <body onload="startViz()">

    <div id="overlay" class="hidden">
      <div class="ring">Loading</div>
    </div>

    <!--Navigations-bar with logo and title-->
    <div class="fix">

      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div style="float: left; padding-left: 5.1%; display: inline;">
          <p class="navbar-brand">PAIRS Smart Crisis Management</p>
        </div>
    </nav><br>
      <div style="float: left; padding-left: 4.7%;">
        <img src="{{url_for('static', filename='pairs-logo.jpg')}}" style="width: auto; height:100px; display: inline;" />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <img src="{{url_for('static', filename='dfki.jpg')}}" style="width: auto; height: 80px; display: inline;" />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <h2 style="display: inline;">Hidden Problem Detector for Supply Chains</h2>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </div>
      <div style="float: right; padding-right: 5.6%;">
        <img src="{{url_for('static', filename='bmwk_eng.png')}}" style="width: auto; height:80px; display: inline;"/>
      </div> 
    </div>
    

    <!-- Script to trigger loading animation-->
    <script>
       function pageReload()
        {
          console.log("Still loading")
          let overlay = document.getElementById("overlay")
          overlay.className = "overlay"
        }
        window.onbeforeunload = pageReload;
    </script>
    
<!--Bereich für die Navigation Tabs-------------------------------------------------------------------------------------------------------------->
<!-- Page content-->

 <div id="statements" style="width: 90%; display: block; margin-left: auto; margin-right: auto; margin-top: 200px; margin-bottom: auto;">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active"  id="default" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">BOM(s)</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab_Graph"  data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Graph set up</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab_Deep"  data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Deep Dive</button>
            </li>
          <li class="nav-item" role="presentation">
                <button class="nav-link", id="cont_tab" data-bs-toggle="tab" data-bs-target="#cont" type="button" role="tab" aria-controls="contact" aria-selected="false">Look behind the scenes</button>
            </li>
        </ul>
   <!--Tab_Box-->
    <div class="tab-content" id="myTabContent" style="border:solid; border-radius: 5px">

    <!-- Bereich für die Nutzerbenachrichtigungen --------------------------------------------------------------------------------------------------->
        <div>

          {% for message in get_flashed_messages() %}
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

          <div class="alert alert-danger alert-dismissible fade show" role="alert" style="text-align: center; font-weight: bold;">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick=""></button>
          </div>

          {% endfor %}

        </div>

    <!-- Bereich für den Tab Content ---------------------------------------------------------------------------------------------------------------->

       <!-- Tabcontent für den BOM Tab der oberen Tableiste ------------------------------------------------------------>
      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="default">
        <div id="BOM" class="tabcontent">
            <!--<div id="BOM" class="tabcont">-->

          <!-- Wechsel von Stücklisten die verarbeitet werden und solche die nur hochgeladen wurden ------------------->
          <div class="row">

            <h3 style="text-align: center; padding-right: 10%;">Select available files for setting up the graph</h3>
            <br><br><br><br>



                <div class="col-sm-4">
                    <h4>Available Files</h4>
                    <select name="available" id="available" multiple style="max-width: 100%;">
                    </select>
                </div>

                <!-- Add Select Options-->
                <script>
                  pass_avail_files = '{{ pass_avail_files | tojson }}'
                  const avail_file_list = JSON.parse(pass_avail_files)['data']
                  var select = document.getElementById('available')
                  for(var i = 0; i < avail_file_list.length; i++){
                    var opt = document.createElement('option')
                    opt.innerHTML = avail_file_list[i]
                    select.appendChild(opt)
                  }


              </script>

              <!-- Initalize Multiple Select Plugin-->
              <script>
                // Initialize multiple select on your regular select
                $("#available").multipleSelect({
                    filter: "true",
                    placeholder: "Select your Files"
                });
              </script>


              <div class="col-sm-4" style="align-items: center; padding-right: 10%;">
                <button class = "btn-lg" id="push" onclick="moveToWork()" style="display: block; margin: auto;">
                  &#187;
                </button>
                <br><br>
                <button class = "btn-lg" id="ToFiles" onclick="moveToFiles()" style="display: block; margin: auto;">
                  &#171;
                </button>
              </div>


              <script>

                function moveToWork(){

                  var select = document.getElementById('available')
                  var files = select.selectedOptions
                  var res = []
                  for (var element of files) {
                    res.push(element.value)
                  }
                  var data = {data: res}
                  const s = JSON.stringify(data)
                  $.ajax({
                  url:"/FilesToWork",
                  type:"POST",
                  contentType: "application/json",
                  data: JSON.stringify(s)}).then(location.reload())
                }

                </script>

              <div class="col-sm-4">
                <h4>Selected Files</h4>
                <select name="selected" id="selected" multiple style="max-width: 100%;">
                </select>
              </div>


              <!-- Add Select options--> 
              <script>
                pass_selected_files = '{{ pass_selected_files | tojson }}'
                const selected_file_list = JSON.parse(pass_selected_files)['data']
                var select = document.getElementById('selected')
                for(var i = 0; i < selected_file_list.length; i++){
                  var opt = document.createElement('option')
                  opt.innerHTML = selected_file_list[i]
                  select.appendChild(opt)
                }
              </script>

              <!-- Initalize Multiple Select Plugin-->
              <script>
                // Initialize multiple select on your regular select
                $("#selected").multipleSelect({
                    filter: true,
                    placeholder : "Select your Files"
                });
              </script>



                <script>


                function moveToFiles(){

                    var select = document.getElementById('selected')
                    var files = select.selectedOptions
                    var res = []
                    for (var element of files) {
                      res.push(element.value)
                    }
                    var data = {data: res}
                    const s = JSON.stringify(data)
                    $.ajax({
                    url:"/WorkToFiles",
                    type:"POST",
                    contentType: "application/json",
                    data: JSON.stringify(s)}).then(location.reload())
                  }


                </script>

          </div>

          <br>
          <hr>

          <!-- Bereich zum löschen der Stücklisten -------------------------------------------------------------------->
          <div class="row">
           <!-- Bereich zum Hochladen der Stücklisten ------------------------------------------------------------------->


            <div class="col-sm-4">
                <h4>Upload BOMs</h4>
                <br>
                <form method=post enctype=multipart/form-data action="{{ url_for('upload_files')}}">
                    <input type=file name=files multiple=""><br><br>
                    <input type=submit id="Up" value=Upload>
                </form>
                <br>
            </div>
            <div class="col-sm-4"></div>
            <div class="col-sm-4">

              <h4>Delete BOMS</h4><br>

              <form method="POST" action="{{ url_for('delete_BOM')}}">
                <p>
                  <label>
                    Search the BOM you wanted to delete:
                    <input type="search" name='todelete' list="BOMS">
                    <datalist id="BOMS">
                    </datalist>
                  </label>
                  </p>
                  <button class="btn btn-sm">Delete</button>
              </form>
            </div>
          </div>

            <script>

              pass_all_files = '{{ pass_all_files | tojson }}'
              const all_file_list = JSON.parse(pass_all_files)['data']
              var delete_list = document.getElementById('BOMS')

              for (var i = 0; i< all_file_list.length; i++){

                file_name = all_file_list[i]
                option = document.createElement('option')
                option.innerHTML = file_name
                delete_list.appendChild(option)
              }

            </script>

          </div>
      </div>

        <!-- Tabcontent für den Graph Tab der oberen Tableiste ---------------------------------------------------------->
      <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="tab_Graph" style="background-color: white; padding-bottom: 550px;">
          <!--<div id="Graph" class="tabcontent">--->
          <div id="Graph" class="tabcont" style="background-color: white; padding-bottom: 0px;">

              <!--erste zeile. Es muss nach links-->
          <div class="c20" style="background-color: white">
              <!--<div class="row" style="align-items: center;">-->

                 <!-- <div class="col-sm-3" style="margin-left: auto;
                  margin-right: auto;">-->
                      <h5>Selected BOM(s)</h5>
                      <select name="selected" id="selected2" style="max-width: 100%;" multiple>
                      </select>
                      <br><br>


                  <script>
                    pass_selected_files = '{{ pass_selected_files | tojson }}'
                    const selected_file_list2 = JSON.parse(pass_selected_files)['data']
                    var select = document.getElementById('selected2')
                    for(var i = 0; i < selected_file_list2.length; i++){
                      var opt = document.createElement('option')
                      opt.innerHTML = selected_file_list2[i]
                      select.appendChild(opt)
                    }
                </script>



                    <form method=post action="{{ url_for('flask_set_up_graph')}}">
                      <button id="Create_Graph" name="Create_Graph" type="submit" class="btn btn-sm">Creating Graph</button>
                    </form><br>
                    <hr>

                 <!-- </div>-->

                 <!-- <div class="col-sm-3" style="margin-left: auto;
                  margin-right: auto;">-->



                  <!-- Komponenten Informationen werden nicht mehr manuell hochgeladen (Sebastian Baer)  -->
                  <!--

                    <h5>Upload Component Information</h5>
                    <form method=post enctype=multipart/form-data action="{{ url_for('upload_market_data')}}">
                      <input type=file name=files><br><br>
                      <input type=submit value=Upload>
                    </form>
                    <br>

                  -->





                <!--  </div>-->

                 <!-- <div class="col-sm-3" style="margin-left: auto;
                  margin-right: auto;">-->



                    <!-- Historische Daten werden nicht mehr manuell hochgeladen (Sebastian Baer)-->
                    <!--

                    <h5>Upload Historical Market Data</h5>
                    <form method=post enctype=multipart/form-data action="{{ url_for('upload_historical_market_data')}}">
                      <input type=file name=files><br><br>
                      <input type=submit value=Upload>
                    </form>
                    <br>

                  -->

                    <h5>Semantic Enrichment</h5>
                    <form method=post action="{{ url_for('flask_enrich_graph')}}">
                      <button id="Enrich_Graph" name="Enrich_Graph" type="submit" class="btn btn-sm">Enrich</button>
                    </form>
                    <br>
                    <hr>
                    <br>

                    <h5>Added Market Data</h5>
                    <select id="added_data" style="height: 100%;  max-width: 100%;" multiple>

                    </select>

                    <script>
                      let added_data = '{{ added_data | tojson }}'
                      added_data = JSON.parse(added_data)['data']
                      var select = document.getElementById('added_data')
                        for(var i = 0; i < added_data.length; i++){
                          var opt = document.createElement('option')
                          opt.innerHTML = added_data[i]
                          select.appendChild(opt)
                        }
                          
                      
                    </script>


                <!-- Component Data kann nicht mehr gelöscht werden (Sebastian Baer) ---->
                <!--

                <h5>Delete Component Data</h5>

                  <form method="POST" action="{{ url_for('delete_component_data')}}">
                    <p>
                      <label>
                        Search the File you wanted to delete:
                        <input type="search" name='todelete' list="Component_Data">
                        <datalist id="Component_Data">
                        </datalist>
                      </label>
                    </p>
                      <button class="btn btn-sm">Delete</button>
                  </form>

                -->

                  </div>

          <script>

            pass_all_component_data = '{{ pass_all_component | tojson }}'
            const all_component_list = JSON.parse(pass_all_component_data)['data']
            var delete_list_component = document.getElementById('Component_Data')


            for (var i = 0; i< all_component_list.length; i++){

              file_name = all_component_list[i]
              option = document.createElement('option')
              option.innerHTML = file_name
              delete_list_component.appendChild(option)
            }

          </script>

          <div id="c80" class="c80" style="background-color: white; border:solid; text-align: center;">
              
          <!-- </div>-->

          <!-- <div class="row">
              <div class="col-sm-12">-->
              <div style="text-align:center">

                <!-- Anna-Maria -->
                <div id="viz1" style="height: 500px;"></div>


              </div>
          <!-- </div>-->

            <!-- Trying a new graph visualization tool 3d-force-graph ------------------------------------------------>

            <!-- 1. Step using the Neo4j javascript driver to get the graph data ------------------------------>
            <script src="https://unpkg.com/neo4j-driver@5.2.0/lib/browser/neo4j-web.min.js"></script>
            <script>
              // create driver & session
              const driver = neo4j.driver("bolt://localhost:7687",
                              neo4j.auth.basic("neo4j", "password"));
              const session = driver.session({database:"neo4j"});
              const start = new Date()
              // run query
              session
                .run('MATCH (n:component)-->(m:component) RETURN n.ident as source_ident, m.ident as target_ident, id(n) as source, id(m) as target LIMIT $limit', {limit: neo4j.int(200)})
                .then(function (result) {
                  // turn records into list of link-objects (can have different shapes depending on framework)
                  // note that we turn the node-ids into javascript ints
                  const links = result.records.map(r =>
                      { return {source:r.get('source').toNumber(),
                                target:r.get('target').toNumber(),
                                source_ident: r.get('source_ident').toString(),
                                target_ident: r.get('target_ident').toString()}});
                  // close session as soon as we have the data
                  session.close();

                  function hasItem (set,array){

                    var res = false

                    for (var element of set) {
                      if (element.toString()==array.toString()){
                        res = true;
                        break;
                      }
                    }

                    return res

                  }

                  function addItem(set,array){
                    if(!(hasItem(set,array))){set.add(array)}
                  }

                  const ids = new Set();
                  links.forEach(l => {
                    addItem(ids,[l.source,l.source_ident]);
                    addItem(ids,[l.target,l.target_ident]);
                  });

                  // create node-array
                  const nodes = Array.from(ids).map(id => {return {id:id[0], name:id[1]}})
                  // create "graph" representation
                  const graphData = { nodes: nodes, links: links};
                  // pass graph data to visualization framework
                  // (here 3d-force-graph)

                  let zoom = Number(((window.outerWidth)/(window.innerWidth)));
                  let widht_factor = 1/zoom
                  let inital_width = (990*widht_factor)+((window.innerWidth/100)*2.5)


                  const Graph = ForceGraph3D({controlType: 'orbit'})
                  (document.getElementById('3d-graph'))
                    .height(500)
                    .width(inital_width + 0)
                    .graphData(graphData)
                    .linkDirectionalArrowLength(3.5)
                    .linkDirectionalArrowRelPos(1)
                    .linkCurvature(0.15)
                    .nodeThreeObject(node => {
                    const sprite = new SpriteText(node.name);
                    sprite.material.depthWrite = false; // make sprite background transparent
                    sprite.color = '#f7f9fa';
                    sprite.textHeight = 8;
                    return sprite;
                    })
                    .linkThreeObjectExtend(true)
                  .linkThreeObject(link => {
                    // extend link with text sprite
                    const sprite = new SpriteText(`isComponent`);
                    sprite.color = '#6ff00c';
                    sprite.textHeight = 4.5;
                    return sprite;
                  })
                  .linkPositionUpdate((sprite, { start, end }) => {
                    const middlePos = Object.assign(...['x', 'y', 'z'].map(c => ({
                      [c]: start[c] + (end[c] - start[c]) / 2 // calc middle point
                    })));

                    // Position sprite
                    Object.assign(sprite.position, middlePos);
                  });



                })
                .catch(function (error) {
                  console.log(error);
                });

                //Dynamically resize widht size of 3d force graph canvas
                $(window).resize(function(){

                  let box = document.getElementById("c80")
                  //console.log("Box size")
                  //console.log(box.offsetWidth)
                  //zoom = Number(((window.outerWidth - 10)/window.innerWidth).toFixed(1));
                  //widht_factor = 1/zoom
                  let new_width = (box.offsetWidth-4).toString()
                  //new_width = (990*widht_factor).toString()
                  let graph_scene = document.getElementsByClassName("scene-container")[0]
                  let canvas = graph_scene.children[2]
                  let newcss = "width: " + new_width + "px; height: 500px;"
                  graph_scene.style.cssText = newcss
                  graph_scene.style[1] = new_width + "px;"
                  canvas.width = new_width
                  canvas.style.width = new_width + "px;"
                  canvas.style.cssText = newcss

                });
 
            </script>


            <!-- 2. Step: The div where the graph is presented-->


            <!--<div class ="presentation" id="3d-graph" style="position: absolute; width: 100vw"></div>
              <div id="force_pos" ></div>-->
                  <div id="3d-graph" ></div>
                

          </div>

          
         <!-- Initialy hide the 3d representation -->
          <script>
            $("#3d-graph").hide();
          </script>

          <!-- Darstellungsoptionen unter dem Fenster-->

          <div class="c20"></div>
          <div class="c80">
            <br>
            <div style="text-align:center">

              <h5>View</h5>
  
              <label class="toggle">
                <input type="checkbox" id="toggleswitch">
                <span class="slider"></span><br><br>
                <span class="labels" data-on="2D representation" data-off="3D representation"></span><br><br>
              </label>
  
              <script>
                var toggleswitch = document.getElementById('toggleswitch');
                var graph2d = document.getElementById('viz1');
                var graph3d = document.getElementById('3d-graph');
  
                toggleswitch.addEventListener('change',function(){
                  if(this.checked) {
                    $("#viz1").hide();
                    $("#3d-graph").show();
  
                  } else {
                    $("#viz1").show();
                    $("#3d-graph").hide();
                  }
                });
              </script>
  
            </div>
            
          </div>
          <br><br><br> 
          
        </div>

         <!-- <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br> -->
      </div>

        <!-- Tabcontent für den Analyze Tab der oberen Tableiste -------------------------------------------------------->
      <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="tab_Deep">
          <div id="Analyze" class="tabcont">

            <!-- Zeitangabe--> 
            <div class="row">

              <!-- Angabe des aktuellen Zeitraums-->
              <div style="display: flex; flex-direction: row; ">
                <h4>Current Time Horizon: {{current_time}} &ensp; &#124; &nbsp;</h4>

                <form class = "form_vertical" method="POST" action="{{ url_for('set_dates')}}">

                  <h4>From: &nbsp;</h4>
                  <input type="date" name="From" style="height: 26px;">
                  <h4>&nbsp;</h4>
                  <h4>To: &nbsp;</h4>
                  <input type="date" name="To" style="height: 26px;">
                  <h4>&ensp;</h4>
                  <input type="submit" value="Submit" style="height: 26px;">

                </form>
              
              </div>

            <br><hr><br> 

            </div>

            <!-- SideNav und Tabcontent-->
            <div class="row">


              <!-- SideNav-->
              <div class="col-sm-2" style="float: left; display: flex;">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs flex-column" id="side_nav_links">
                <li class="nav-item">
                  <a id="link_alert" class= "nav-link active" name = "side_tab" data-toggle="tab" href="#tab_alert">Alerts</a>
                </li>
                <li class="nav-item">
                  <a id="link_critical" class="nav-link" name="side_tab" data-toggle="tab" href="#tab_critical_components">Critical Components</a>
                </li>
                <li class="nav-item">
                  <a id="link_comparison" class="nav-link" name="side_tab" data-toggle="tab" href="#tab_comparison">Component Comparison</a>
                </li>
                <li class="nav-item">
                  <a id="link_search" class="nav-link" name="side_tab" data-toggle="tab" href="#tab_search">Search</a>
                </li>
              </ul>

                <div class="vertical_line">     
                </div>
        
              </div>
              
            <!-- Tabcontent--> 
              <div class = "col-lg-10">
        
                <!-- Tab panes -->
                <div class="tab-content">

                  <div class="tab-pane container active" id="tab_alert" style="background-color: initial; color: initial;">
                    
                    <!-- Detected Shortage Trends/ User Alerts---->
                      <div class="row">
                        <div class="col-sm-11">
                          <table class="table table-striped">
                            <thead>
                              <tr>
                                <th scope="col"></th>
                                <th scope="col">Component</th>
                                <th scope="col">Manufacturer</th>
                                <th scope="col">Supplier</th>
                                <th scope="col">Type</th>
                                <th scope="col">Reason</th>
                              </tr>
                            </thead>
                            <tbody id="alert_table">
                            </tbody>
                          </table>
                        </div>
                        <div class="col-sm-1">
                          <img src="{{url_for('static', filename='Warning.gif')}}" align="top" style="height: 50px; margin-left: 10px;"/>
                        </div>
                      </div>

                  </div>


                  <div class="tab-pane container fade" id="tab_critical_components"style="background-color: initial; color: initial;">

                    <div class="container">
                      <div class="row">

                        <div class="col-md-2" style="border: 3px solid black;">
                          <h5 style="padding-top: 3px;">Critical Components</h5>
                          <br>
                          <nav>
                            <ul id="list_critical" style="width: max-content; list-style-type:none;">
                            </ul>
                          </nav>
                        </div>

                        <div class="col-lg-10" style="border: 3px solid black;">

                          <h5 style="padding-top: 3px;">History & Trends</h5><hr>
                          <div id="detail_report" class="hidden">

                            <section style="margin: 10px;">
                                <h5 name="hidden_headline" class="hidden">Component Information</h5>
                                <div id="component_detail"></div>
                            </section><hr>
            
                            <section style="margin: 10px;">
                              <h5 name="hidden_headline" class="hidden">Market Price</h5><br>
                              <div id="price_detail_table"></div>
                              <br><br>
                              <div id="detail_price_chart"></div>
                            </section><hr>
          
            
                            <section style="margin: 10px;">
                              <h5 name="hidden_headline" class="hidden">Market Availability</h5><br>
                              <div id="avail_detail_table"></div>
                              <br><br>
                              <div id="detail_avail_chart"></div>
                            </section><hr>
            
                            <section style="margin: 10px;">
                              <h5 name="hidden_headline" class="hidden">Lead-Time</h5><br>
                              <div id="lead_detail_table"></div>
                              <br><br>
                              <div id="detail_lead_chart"></div>
                            </section>
          
                          </div>
                        </div>

                      

                      </div>
                    </div>
                    
                  </div>

                  <div class="tab-pane container fade" id="tab_search"style="background-color: initial; color: initial;">

                    <form method="POST" action="/decision">
                      <input type="text" placeholder="&#x1F50E; &nbsp; search for component" name="input" style="border-radius: 0.25rem;">
                      <button class = "btn-sm" type="submit">Search</button>
                    </form>

                    <br><br>

                    <div id="search_results" class="hidden" style="border: 3px solid black;">

                      <h5 style="margin: 10px;">Details</h5>
                      <hr>
                      <div id="search_results" style="margin: 10px;">

                              <h5>Component Information</h5><br>
                              <section>
                                <div id="component_information" style="margin: 10px;"></div>
                              </section>

                              <hr>

                              <h5>Median-Price</h5><br>
                              <div id="price_search_table" style="margin: 10px;"></div><br>
                              <div id="price_search_chart"></div><br>

                              <hr>

                              <h5>Availabilities</h5><br>
                              <div id="avail_search_table" style="margin: 10px;"></div><br>
                              <div id="avail_search_chart"></div><br>

                              <hr>

                              <h5>Lead-Time</h5><br>
                              <div id="lead_search_table" style="margin: 10px;"></div><br>
                              <div id="lead_search_chart"></div><br>

                      </div>

                    </div>
                    
                  </div>

                  <div class="tab-pane container fade" id="tab_comparison" style="background-color: initial; color: initial;">

                    <div id="summary_overview" class="hidden" style= "border: 3px solid black;">

                        <h5 style="margin-top: 8px;">Component Comparison</h5><hr>

                        <h5>Component Information</h5><br><hr>

                        <section>
                          <div id="component_summary"></div>
                        </section>

                        <hr>

                        <h5>Median-Price</h5><br>
                        <div id="price_summary_table" style="margin: 10px;"></div><br>
                        <div id="summary_price_chart"></div><hr><br>

                        <h5>Availabilities</h5><br>


                        <div id="avail_summary_table" style="margin: 10px;"></div><br>
                        <div id="summary_avail_chart"></div><hr><br>
                            

                        <h5>Lead Time</h5><br>
                        <div id="lead_summary_table" style="margin: 10px;"></div><br>
                        <div id="summary_lead_chart"></div><br>
                          
                      </div>
                    
                    </div>

                  </div>
        
                </div>

              </div>

            </div>

            <!-- Script to generate summary overview + Alert -->
            <script>

              //Load Google_Charts
              google.charts.load('45',{packages:['line','corechart','table']});

              var decision_summary = '{{ decision_summary| tojson }}'
              decision_summary = JSON.parse(decision_summary.replace(/\bNaN\b/g, "null"))

              console.log("Hier kommt die Decision Data")
              console.log(decision_summary)

              var price_chart_summary = decision_summary.price_chart
              console.log("Price-Chart vor der null entfernung")
              console.log(price_chart_summary)
              var avail_chart_summary = decision_summary.avail_chart
              console.log("Avail-Chart vor der null entfernung")
              console.log(avail_chart_summary)
              var lead_chart_summary = decision_summary.lead_chart
              console.log("Lead-Chart vor der null entfernung")
              console.log(lead_chart_summary)
              var price_table_data_summary = decision_summary.price_table
              var avail_table_data_summary = decision_summary.avail_table
              var lead_table_data_summary = decision_summary.lead_table
              var component_table_data_summary = decision_summary.component_table
              var seller_list = decision_summary.sellers

              var price_div_summary = document.getElementById('summary_price_chart')
              var avail_div_summary = document.getElementById('summary_avail_chart')
              var lead_div_summary = document.getElementById('summary_lead_chart')

              var component_table_div_summary = document.getElementById('component_summary')
              var price_table_div_summary = document.getElementById('price_summary_table')
              var avail_table_div_summary = document.getElementById('avail_summary_table')
              var lead_table_div_summary = document.getElementById('lead_summary_table')

              google.charts.setOnLoadCallback(function(){ drawChart_summary(price_chart_summary, price_div_summary, 'Median-Price Chart','Date','Median-Price')});
              google.charts.setOnLoadCallback(function(){ drawChart_summary(avail_chart_summary, avail_div_summary, 'Availability Chart','Date','Availability')});
              google.charts.setOnLoadCallback(function(){ drawChart_summary(lead_chart_summary, lead_div_summary, 'Lead-Time Chart','Date','Lead-Days')});
              google.charts.setOnLoadCallback(function(){ drawTable_summary(component_table_data_summary,component_table_div_summary)})
              google.charts.setOnLoadCallback(function(){ drawTable_summary(price_table_data_summary,price_table_div_summary)})
              google.charts.setOnLoadCallback(function(){ drawTable_summary(avail_table_data_summary,avail_table_div_summary)})
              google.charts.setOnLoadCallback(function(){ drawTable_summary(lead_table_data_summary,lead_table_div_summary)})
              generate_alert(price_table_data_summary,avail_table_data_summary,lead_table_data_summary, seller_list, component_table_data_summary);

              function generate_alert(price_array, avail_array, lead_array, sellers, component_table) {

                div = document.getElementById('notification_list')

                var counter = 0

                  for (var i=1; i<price_array.length; i++) {

                    reason = ""
                    component_id = price_array[i][0]
                    price_row = price_array[i]
                    avail_row = avail_array[i]
                    lead_row = lead_array[i]

                    price_change = (parseFloat(price_row[1]) / 100)
                    avail_change = (parseFloat(avail_row[1]) / 100)
                    lead_change = (parseFloat(lead_row[1]) / 100)

                    if (price_change > 0 && avail_change < 0){
                      reason = "For the current time horizon the component " + component_id + 
                      " shows shortage behaviour by increase in price (" + price_row[1] + ") and decrease in availability (" + avail_row[1] + ")"

                      counter = counter + 1
                    }

                    if (lead_change > 0 && avail_change < 0){
                      reason = "For the current time horizon the component " + component_id + 
                      " shows shortage behaviour by increase in lead-time(" + lead_row[1] + ") and decrease in availability (" + avail_row[1] + ")"

                      counter = counter + 1
                    }

                    if (lead_change > 0 && price_change > 0){
                      reason = "For the current time horizon the component " + component_id + 
                      " shows shortage behaviour by incrase in lead-time (" + lead_row[1] + ") and increase in price (" + price_row[1] + ")"

                      counter = counter + 1
                    }

                    if (price_change > 0 && avail_change < 0 && lead_change > 0){
                      reason = "For the current time horizon the component " + component_id + 
                      " shows shortage behaviour by increase in price (" + price_row[1] + "), lead-time (" + lead_row[1] + ") and decrease in availability (" + avail_row[1] + ")"

                      counter = counter + 1

                    }


                    // Wenn jetzte also eine Störung vorliegt mache folgendes
                    if (reason !== ""){

                      var row = component_table.filter(table_row => table_row.includes(component_id))[0]
                      var category_string = row[1]
                      var manufacturer_string = row[2]
                      var seller_string = sellers.filter(item => item.includes(component_id))[0][1]

                      alert_table = document.getElementById("alert_table")
                      table_row = document.createElement("tr")

                      table_element_index = document.createElement("td")
                      console.log("Der Counter")
                      console.log(counter.toString())
                      table_element_index.innerHTML = counter.toString()
                      table_row.appendChild(table_element_index)


                      table_element_component = document.createElement("td")
                      table_element_component.innerHTML = component_id
                      table_row.appendChild(table_element_component)

                      table_element_manufacturer = document.createElement("td")
                      table_element_manufacturer.innerHTML = manufacturer_string
                      table_row.appendChild(table_element_manufacturer)

                      table_element_seller = document.createElement("td")
                      table_element_seller.innerHTML = seller_string
                      table_row.appendChild(table_element_seller)

                      table_element_category = document.createElement("td")
                      table_element_category.innerHTML = category_string
                      table_row.appendChild(table_element_category)

                      table_element_reason = document.createElement("td")
                      table_element_reason.innerHTML = reason
                      table_row.appendChild(table_element_reason)

                      alert_table.appendChild(table_row)

                    }

                  }
              }

              //Draw Charts for the Summary Report
              function drawChart_summary(data_array, div, title, haxis, vaxis) {

                //Convert the chart date strings into date objects
                for(var i=1; i< data_array.length; i++){
                  data_array[i][0] = new Date(data_array[i][0]);
                }

                //Replace null -- means no results found with zero (0)

                data_array.forEach((row, index1) => {
                  row.forEach((element, index2) => {
                    if(element === null){
                      row[index2] = 0;
                    }
                  });
                });
              

                console.log("Das Daten-Array")
                console.log(data_array)

                var data = new google.visualization.arrayToDataTable(data_array);
          
                var options = {

                  title: title,
                  hAxis: {title: haxis},
                  vAxis: {title: vaxis},
                  width: 1200,
                  height: 500,
                  chartArea: {width: "70%", left: 200},
                  legend: {
                    position: 'right',
                    alignment: "center"

                  }

              };

              var chart = new google.visualization.LineChart(div);
              chart.draw(data, options);
              }
              
              function drawTable_summary(data_array ,div) {

                var data = new google.visualization.arrayToDataTable(data_array);
                var table = new google.visualization.Table(div);
                table.draw(data, {showRowNumber: false, width: '100%', height: '100%'});

                //Sorgt dafür das der Summary-Report sichtbar wird
                var summary_div = document.getElementById('summary_overview')
                summary_div.className = 'container'

              }
            </script>
            
            <!--Script to generate search overview -->
            <script>
              //Load Google_Charts
              google.charts.load('45',{packages:['line','corechart','table']});

              var search = '{{ search| tojson }}'
              search = JSON.parse(search.replace(/\bNaN\b/g, "null"))


              var price_chart_search = search.price_chart
              var avail_chart_search = search.avail_chart
              var lead_chart_search = search.lead_chart
              var price_table_data_search = search.price_table
              var avail_table_data_search = search.avail_table
              var lead_table_data_search = search.lead_table
              var component_table_data_search = search.component_table
              let search_id = search.idents[0]

              var price_div_search = document.getElementById('price_search_chart')
              var avail_div_search = document.getElementById('avail_search_chart')
              var lead_div_search = document.getElementById('lead_search_chart')

              var component_table_div_search = document.getElementById('component_information')
              var price_table_div_search = document.getElementById('price_search_table')
              var avail_table_div_search = document.getElementById('avail_search_table')
              var lead_table_div_search = document.getElementById('lead_search_table')

              google.charts.setOnLoadCallback(function(){ drawChart_search(price_chart_search, price_div_search, 'Median-Price Chart','Date','Median-Price')});
              google.charts.setOnLoadCallback(function(){ drawChart_search(avail_chart_search, avail_div_search, 'Availability Chart','Date','Availability')});
              google.charts.setOnLoadCallback(function(){ drawChart_search(lead_chart_search, lead_div_search, 'Lead-Time Chart','Date','Lead-Days')});
              google.charts.setOnLoadCallback(function(){ drawTable_search(component_table_data_search,component_table_div_search)})
              google.charts.setOnLoadCallback(function(){ drawTable_search(price_table_data_search,price_table_div_search)})
              google.charts.setOnLoadCallback(function(){ drawTable_search(avail_table_data_search,avail_table_div_search)})
              google.charts.setOnLoadCallback(function(){ drawTable_search(lead_table_data_search,lead_table_div_search)})


              //Draw Charts for the Search Report
              function drawChart_search(data_array, div, title, haxis, vaxis) {

                console.log("Das DatenArray für den Search Report")
                console.log(data_array)

                //Convert the chart date strings into date objects
                for(var i=1; i< data_array.length; i++){
                  data_array[i][0] = new Date(data_array[i][0]);
                }

                var data = new google.visualization.arrayToDataTable(data_array)

                var options = {

                  title: title,
                  hAxis: {title: haxis},
                  vAxis: {title: vaxis},
                  width: 1200,
                  chartArea: {width: "70%", left: 200},
                  legend: {
                    position: 'none'
                  }
                  
              };

              var chart = new google.visualization.LineChart(div);
              chart.draw(data, options);
              }

              function drawTable_search(data_array ,div) {

                var data = new google.visualization.arrayToDataTable(data_array);
                var table = new google.visualization.Table(div);
                table.draw(data, {showRowNumber: false, width: '100%', height: '100%'});


                //let selected_component = document.getElementById(component_id);
                //selected_component.className = "selected_component"

                //Sorgt dafür das die Search-Results sichtbar werden
                var search_div = document.getElementById('search_results')
                search_div.className = ""

              }
            </script>

            <!-- Script to generate detail overview-->
            <script>

              //Load Google_Charts
              google.charts.load('45',{packages:['line','corechart','table']});

              var decision = '{{ decision| tojson }}'
              decision = JSON.parse(decision.replace(/\bNaN\b/g, "null"))
              console.log("Hier kommt die Decision Data")


              price_chart = decision.price_chart
              avail_chart = decision.avail_chart
              lead_chart = decision.lead_chart
              price_table_data = decision.price_table
              avail_table_data = decision.avail_table
              lead_table_data = decision.lead_table
              component_table_data = decision.component_table
              let component_id = decision.idents[0]
              
              price_div = document.getElementById('detail_price_chart')
              avail_div = document.getElementById('detail_avail_chart')
              lead_div = document.getElementById('detail_lead_chart')

              component_table_div = document.getElementById('component_detail')
              price_table_div = document.getElementById('price_detail_table')
              avail_table_div = document.getElementById('avail_detail_table')
              lead_table_div = document.getElementById('lead_detail_table')

              google.charts.setOnLoadCallback(function(){ drawChart_detail(price_chart, price_div, 'Median-Price Chart','Date','Median-Price')});
              google.charts.setOnLoadCallback(function(){ drawChart_detail(avail_chart, avail_div, 'Availability Chart','Date','Availability')});
              google.charts.setOnLoadCallback(function(){ drawChart_detail(lead_chart, lead_div, 'Lead-Time Chart','Date','Lead-Days')});
              google.charts.setOnLoadCallback(function(){ drawTable_detail(component_table_data,component_table_div)})
              google.charts.setOnLoadCallback(function(){ drawTable_detail(price_table_data,price_table_div)})
              google.charts.setOnLoadCallback(function(){ drawTable_detail(avail_table_data,avail_table_div)})
              google.charts.setOnLoadCallback(function(){ drawTable_detail(lead_table_data,lead_table_div)})

              
              //Draw Charts for the Detail Report
              function drawChart_detail(data_array, div, title, haxis, vaxis) {

                //Convert the chart date strings into date objects
                for(var i=1; i< data_array.length; i++){
                  data_array[i][0] = new Date(data_array[i][0]);
                }

                var data = new google.visualization.arrayToDataTable(data_array);
          
                var options = {

                  title: title,
                  hAxis: {title: haxis},
                  vAxis: {title: vaxis},
                  width: 1000,
                  chartArea: {width: "70%", left: 200},
                  legend: {
                    position: 'none'
                  }
                  
              };

              var chart = new google.visualization.LineChart(div);
              chart.draw(data, options);
              }
              
              function drawTable_detail(data_array ,div) {

                var data = new google.visualization.arrayToDataTable(data_array);
                var table = new google.visualization.Table(div);
                table.draw(data, {showRowNumber: false, width: '100%', height: '100%'});

                var hidden_headlines = document.getElementsByName("hidden_headline")

                for(let item of hidden_headlines){
                  item.className = "unset"
                }

                let selected_component = document.getElementById(component_id);
                selected_component.className = "selected_component"

                //Sorgt dafür das der Detail-Report sichtbar wird
                var detail_div = document.getElementById('detail_report')
                detail_div.className = ''

              }
            </script>
    
            <!-- Script to generate the list of critical components-->
            <script>
                var critical_components = '{{ critical_components | tojson }}'
                critical_components = JSON.parse(critical_components)['data']

                console.log("Hier kommen die kritischen Komponenten")
                console.log(critical_components)

                if (critical_components.length == 0){
                  console.log("List of critical components is empty")
                }

                else{
                  var liste = document.getElementById("list_critical")

                  critical_components.forEach(element => {

                    var listitem = document.createElement("li")
                    listitem.id = element;
                    var anchor = document.createElement("a")
                    anchor.innerHTML = element
                    anchor.href = "/decision/"+element
                    listitem.appendChild(anchor)
                    liste.appendChild(listitem)
                    
                  });

                }

            </script>


          </div>

        <!-- Tabcontent für den Approach Tab der oberen Tableiste ------------------------------------------------------->
        <div class="tab-pane fade" id="cont" role="tabpanel" aria-labelledby="cont_tab">
        <div id="Approach" class="tabcont">

            <div class="row" style="display: flex; justify-content: center;">
              <!--<div class="col-sm-3" style=" overflow: scroll; border: 3px solid black; margin-right: 3px;">-->
              <div class="col-sm-3" style=" border: 3px solid black; margin-right: 3px;">
                <h4>Motivation</h4>
                <p style="font-size: medium;">
                  Driven by the increasing trade in intermediate goods, shortage
                  of specific components like semiconductors, greater richness of variants in
                  manufacturing industry as well as the global increase in lead times, supply
                  chain disruptions has become a mass phenomenon. When manufacturing component-
                  based products like sensors, engines or electronics, underlying supply chains
                  are complex and increasingly non-transparent beyond tier 1 supplier. Due to the
                  non-transparency of early supply chain stages traditional management approaches
                  only have an effect at tier 1, maybe tier 2, i.e., they enable reactive instead
                  of pro-active behavior in supply chain and risk management.
                </p>
              </div>
              <div class="col-sm-4" style="border: 3px solid black; margin-right: 3px;">
                
                <h4>Objective</h4>

                <p style="font-size: medium;">
                  The Hidden Problem Detector represents a system for graph-theoretic analysis
                  of component criticality for detecting hidden problems in component-based
                  supply chains. In contrast to existing
                  top-down approaches to analyze the market situation, the Hidden Problem Detector
                  transform Bill-of-Materials into a knowledge graph and enrich the graph
                  with hisorical and current market data for improving transparency of
                  supply chain by enabling a transparent view of all supply chain levels
                  including the identification and location of shortages.
                </p>

                <img src="{{url_for('static', filename='objective_image.png')}}" style="height: auto; max-width: 100%;"/>

              </div>
              <div class="col-sm-4" style="border: 3px solid black;">
                
                <h4>Approach</h4>

                <p style="font-size: medium;">
                  The system uses a graph-theoretic approach. The conceptual model
                  consits of four main modules:
                </p>
              
                <br>

                <ul>
                  <li style="font-size: medium;">Mapper module</li>
                  <li style="font-size: medium;">Semantifier</li>
                  <li style="font-size: medium;">Criticality Controller</li>
                  <li style="font-size: medium;">Hidden Problem Detector</li>
                </ul>

                <br>

                <img src="{{url_for('static', filename='approach_image.png')}}" style="height: auto; max-width: 100%;"/>

              </div>
            </div>

            <div class="row" style="display: flex; justify-content: center;">
              <div class="col-sm-5" style="border: 3px solid black; margin-top: 3px; margin-right: 3px;">
                
                <h4>Implementation</h4>

                <p style="font-size: medium;">

                  Based on the conceptual model, we implemented a service prototype for hidden problem detection
                  in supply chains in form of a web interface. In order to be able to process BOMs
                  in form of a knowledge graph, realizing graph-theoretic analyses, integrated external market data and displaying
                  results to the user, a server-client architecture has been deployed by using <a href=" https://flask.palletsprojects.com/en/2.2.x/">Flask</a>,
                  <a href="https://www.python.org/">Python</a>, <a href="https://neo4j.com/">Neo4j</a> and the
                  <a href="https://octopart.com/">Octopart API</a>.
                  On client side, the interface has been implemented as a web interface (HTML, JavaScript)
                  that accepts uploads of BOM files (xlsx).

                </p>

                <br>

                <img src="{{url_for('static', filename='implementation_image.png')}}" style=" max-height: 60%; max-width: 60%; margin: auto; display: block;"/>
              </div>

              <div class="col-sm-6" style="border: 3px solid black; margin-top: 3px;">
                
                <h4>Evaluation</h4>
                <p style="font-size: medium;">

                  To evaluate our approach, we conducted a runtime study with the implemented service prototype.
                  Goal of this study was to assess the performance in determining critical nodes in knowledge graphs.
                  In absence of open BOM data sets, we applied the USAir97 data set and mapped it onto a
                  directed and unweighted graph. The resulting knowledge graph contains
                  airports as nodes (#332) and corresponding edges (#2126) representing flight connections.
                  Similar to critical nodes in the supply chain graph, influential nodes, i.e., airports,
                  have many direct flights from or to other airports. In case these airports were affected
                  by strikes, staff shortages, technical problems etc.; disruptions would propagate massively within the graph.
                  As the applied data set covers no information about substitutes and the resulting graph
                  is unweighted due to the airport domain, the assessment of the performance in
                  determining critical nodes by the Hidden Problem Detector is focused on the combination of in-degree,
                  out-degree and betweenness-centrality.

                </p>

                <br> 

                <p style="font-size: medium;">
                  
                  In summary, a knowledge graph with 332 nodes and 2126 corresponding edges according to the USAir97
                  data set was included in the experiment. Based on the SI spreading model and SIR
                  spreading model 20 nodes were labelled as critical; here, 4
                  nodes were identified as duplicates. The experiment was conducted in two runs for determining nodes
                  labeled as critical by (1) SI, and (2) SIR spreading model.
                  A reduced model was applied in the experiment due to the airport
                  topic indicating no substitutes as well as the unweighted nature of
                  the resulting graph. That means, the graph-theoretic concepts
                  in-degree for substitute edges and out-strength were skipped. 3 out of 5 concepts (60%)
                  of the criticality controller model were applied within the performance evaluation.
                  The service prototype was able to determine 7 out of 10 critical nodes
                  with respect to the ground truth by SIR spreading model. Additionally, 60%
                  of nodes labelled as critical by the SI spreading model were detected correctly
                  with the reduced GRASPER model. We detected that the performance of the model in the
                  run with SIR spreading model was quite good (correctness of 70%) whereas correctness
                  in context of labeling by SI spreading model was lower (60%).

                </p>

                <br>

                <img src="{{url_for('static', filename='evaluation_image.png')}}" style="max-height: 100%; max-width: 100%; margin: auto; display: block;"/>
              </div>

              <div class="col-sm-11" style="border: 3px solid black; margin-top: 3px;">
                <h5>References</h5>
                <ul  style="font-size: small;">
                    <li> ZHOU, T., LIU, J.-G., BAI, W.-J., CHEN, G. & WANG, B.-H. 2006. Behaviors of susceptible-infected epidemics on scale-free networks with identical infectivity. Physical Review E, 74, 056109. </li>
                    <li> HETHCOTE, H. W. 2000. The mathematics of infectious diseases. SIAM review, 42, 599-653. </li>
                    <li> ZHANG, L., SUN, X., WANG, P., HOU, J. & SUN, G. Identifying influential nodes with a community structure measure. 2019 IEEE Fourth International Conference on Data Science in Cyberspace (DSC), 2019. IEEE, 264-269. </li>
                    <li> QIANG, R. & YANG, J. 2022. Influential Spreader Identification in Complex Networks Based on Network Connectivity and Efficiency. Wireless Communications and Mobile Computing, 2022. </li>
                </ul>
              </div>
            </div>
            <br><br><br><br>

        </div>
        </div>

        <!-- Script zum öffnen des vorher angezeigten Tab (NavTab oben)-->
        <script>

          var tab = '{{ tab | tojson }}'
          var tab = JSON.parse(tab)['data']

          if(tab == "BOM"){
            element = document.getElementById("home")
            current_open = document.getElementsByClassName("tab-pane fade show active")[0]
            old_open_nav_button = document.getElementsByClassName("nav-link active")[0]
            old_open_nav_button.className = "nav-link"
            new_open_nav_button = document.getElementById("default")
            new_open_nav_button.className = "nav-link active";
            current_open.className = "tab-pane fade"
            element.className = "tab-pane fade show active"
          }

          if(tab == "Graph"){
            element = document.getElementById("profile")
            current_open = document.getElementsByClassName("tab-pane fade show active")[0]
            old_open_nav_button = document.getElementsByClassName("nav-link active")[0]
            old_open_nav_button.className = "nav-link"
            new_open_nav_button = document.getElementById("tab_Graph")
            new_open_nav_button.className = "nav-link active"
            current_open.className = "tab-pane fade"
            element.className = "tab-pane fade show active"
          }

          if(tab=="Analyze"){
            element = document.getElementById("contact")
            current_open = document.getElementsByClassName("tab-pane fade show active")[0]
            old_open_nav_button = document.getElementsByClassName("nav-link active")[0]
            old_open_nav_button.className = "nav-link"
            new_open_nav_button = document.getElementById("tab_Deep")
            new_open_nav_button.className = "nav-link active"
            current_open.className = "tab-pane fade"
            element.className = "tab-pane fade show active"
          }

  

        </script>

        <!-- Script zum öffnen des vorher angezeigten Tab (DeepDive Tab an der linken Seite)-->
        <script>

          var tab_side = '{{ tab_side | tojson }}'
          var tab_side = JSON.parse(tab_side)['data']

          var tab_links = document.getElementsByName("side_tab")
          var tab_panes = document.getElementsByClassName("tab-pane container");


          for (let item of tab_panes) {
            item.className = "tab-pane container fade"  
          }

          for (let item of tab_links){
            item.className = "nav-link"
          }

          var active_tab = document.getElementById(tab_side)
          console.log(active_tab)
          active_tab.className = "tab-pane container active"

          if(tab_side == "tab_alert"){

            var tablink = document.getElementById("link_alert")
            tablink.className = "nav-link active"

          }

          if(tab_side == "tab_critical_components"){

              var tablink = document.getElementById("link_critical")
              tablink.className = "nav-link active"

          }

          if(tab_side == "tab_search"){

            var tablink = document.getElementById("link_search")
            tablink.className = "nav-link active"

          }



        </script>


   </div>
 </div> <br><br>
 </div> <br><br>


    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!--Footer-->
    <footer class="footer">

                <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                    © 2023 Copyright:
                    <a class="text-dark"
                       href="https://www.dfki.de/web/forschung/projekte-publikationen/projekte-uebersicht/projekt/pairs/">DFKI_PAIRS</a>
                </div>

    </footer>

   
  </body>
</html>
